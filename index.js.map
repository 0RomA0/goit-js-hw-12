{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst baseURL = `https://pixabay.com/api/?per_page=15`;\n\n\nexport async function backendData(searchWord, currentPage = 1) {\n    const params = {\n            key: \"49367974-1ddb9c95ea8d865fcbee88608\",\n            q: searchWord,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            page: currentPage,\n    }; \n\n   try {\n    const response = await axios.get(baseURL, { params });\n        return response.data;\n   } catch (error) {\n    console.log(\"Помилка при отриманні даних:\", error);\n   }\n\n}\n\n","// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\n\n\nfunction createPhoto(imag) {\n\n    return imag.map(item => {\n        return `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=${item.largeImageURL}>\n        <img class=\"gallery-image\" src=${item.webformatURL} alt=${item.tags} />\n    </a>\n    <div class=\"info\">\n        <p class=\"gallery-info\">Likes: <span class=\"galery-info-span\">${item.likes}</span></p>\n        <p class=\"gallery-info\">Views: <span class=\"galery-info-span\">${item.views}</span></p>\n        <p class=\"gallery-info\">Comments: <span class=\"galery-info-span\">${item.comments}</span></p>\n        <p class=\"gallery-info\">Downloads: <span class=\"galery-info-span\">${item.downloads}</span></p>\n    </div>\n</li>`\n    }).join(\"\");\n    \n}\n\n\n\nexport function renderPhotos(images) {\n    const galleryUl = document.querySelector('.gallery');\n\n     galleryUl.insertAdjacentHTML(\"beforeend\", createPhoto(images));\n\n    const lightbox = new SimpleLightbox('.gallery a');\n    lightbox.refresh();\n    \n}\n\n\nexport function clearGallery() {\n    document.querySelector('.gallery').innerHTML = \"\";\n}\n","import { backendData } from \"./js/pixabay-api\";\nimport { renderPhotos } from \"./js/render-functions\";\nimport { clearGallery } from \"./js/render-functions\";\n\n\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst loader = document.querySelector(\".loader\");\nconst form = document.querySelector(\".form\");\nconst input = document.querySelector(\"input\");\nconst loadBtn = document.querySelector('.load-btn');\n\n\nlet query = null;\nlet currentPage = 1;\nlet totalHits = 0;\n\nform.addEventListener(\"submit\", formSubmit);\n\nloadBtn.addEventListener(\"click\", clickLoadMoreBtn);\n\n\n\n\n// Function formSubmit //\n\nasync function formSubmit(event) {\n\n    event.preventDefault();\n    \nif (input.value.trim() === \"\") {\n    return iziToast.show(\n    {\n        message: `❌ Eter a search word`,\n        position: \"topRight\",\n        color: \"red\",\n    }) ;\n    } \n\n    \n    clearGallery();\n    loader.style.display = \"block\"; // Показуємо лоадер\n    query = input.value;\n\n    currentPage = 1;\n    try {\n        const hitsInfo = await backendData(query, currentPage);\n        totalHits = hitsInfo.totalHits;\n        if (hitsInfo.hits.length === 0) {\n            loadBtn.style.display = \"none\";\n                iziToast.show({\n                    message: `❌ Sorry, there are no images matching your search query. Please try again!`,\n                    position: \"topRight\",\n                    color: \"red\",\n                });\n            }  else {\n                    renderPhotos(hitsInfo.hits); \n            loadBtn.classList.remove(\"visually-hidden\");\n    \n            if (totalHits > 15) {\n                loadBtn.style.display = \"block\"; // Показуємо кнопку, якщо є ще сторінки\n            } else {\n                loadBtn.style.display = \"none\"; // ховаємо кнопку, якщо менше 15\n                \n            }\n                \n            }\n    } catch (error) {\n         console.log(\"Помилка при отриманні даних:\", error);\n    } finally {\n        loader.style.display = \"none\"; // Ховаємо лоадер після запиту  \n    }\n    form.reset();\n}\n\n\n\n// Function clickBtn //\n\nasync function clickLoadMoreBtn() {\n\n    currentPage += 1;\n    loader.style.display = \"block\"; // Показуємо лоадер\n    loader.style.top = \"100%\"\n   \n    try {\n    const hitsInfo = await backendData(query, currentPage);\n        renderPhotos(hitsInfo.hits); \n\n        // Отримуємо висоту першої карточки\n            const firstCard = document.querySelector(\".gallery-item\");\n            if (firstCard) {\n                const cardHeight = firstCard.getBoundingClientRect().height;\n                window.scrollBy({\n                    top: cardHeight * 2,\n                    behavior: \"smooth\"\n                });\n            }\n   \n        const totalLoadedImages = currentPage * 15; \n        // console.log(`Total hits: ${totalHits}, Total loaded images: ${totalLoadedImages}`);\n\n        if (totalLoadedImages >= totalHits) {\n            loadBtn.style.display = \"none\"; // Ховаємо кнопку, якщо всі зображення завантажені\n            iziToast.show({\n                message: `❌ We're sorry, but you've reached the end of search results.`,\n                position: \"topRight\",\n                color: \"blue\",\n            });\n        } else {\n            loadBtn.style.display = \"block\"; // Повертаємо кнопку, якщо є ще сторінки\n        }\n    } catch (error) {\n         console.log(\"Помилка при отриманні даних:\", error);\n    } finally {\n        loader.style.display = \"none\"; // Ховаємо лоадер після запиту  \n    }\n    \n\n   \n}\n\n\n"],"names":["baseURL","backendData","searchWord","currentPage","params","axios","error","createPhoto","imag","item","renderPhotos","images","SimpleLightbox","clearGallery","loader","form","input","loadBtn","query","totalHits","formSubmit","clickLoadMoreBtn","event","iziToast","hitsInfo","firstCard","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,uCAGT,eAAeC,EAAYC,EAAYC,EAAc,EAAG,CAC3D,MAAMC,EAAS,CACP,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,CAClB,EAEG,GAAI,CAEC,OADa,MAAME,EAAM,IAAIL,EAAS,CAAE,OAAAI,CAAM,CAAE,GAChC,IACpB,OAAQE,EAAO,CACf,QAAQ,IAAI,+BAAgCA,CAAK,CACjD,CAEJ,CCdA,SAASC,EAAYC,EAAM,CAEvB,OAAOA,EAAK,IAAIC,GACL;AAAA,mCACoBA,EAAK,aAAa;AAAA,yCACZA,EAAK,YAAY,QAAQA,EAAK,IAAI;AAAA;AAAA;AAAA,wEAGHA,EAAK,KAAK;AAAA,wEACVA,EAAK,KAAK;AAAA,2EACPA,EAAK,QAAQ;AAAA,4EACZA,EAAK,SAAS;AAAA;AAAA,MAGrF,EAAE,KAAK,EAAE,CAEd,CAIO,SAASC,EAAaC,EAAQ,CACf,SAAS,cAAc,UAAU,EAExC,mBAAmB,YAAaJ,EAAYI,CAAM,CAAC,EAE7C,IAAIC,EAAe,YAAY,EACvC,QAAO,CAEpB,CAGO,SAASC,GAAe,CAC3B,SAAS,cAAc,UAAU,EAAE,UAAY,EACnD,CC9BA,MAAMC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,OAAO,EACtCC,EAAU,SAAS,cAAc,WAAW,EAGlD,IAAIC,EAAQ,KACRf,EAAc,EACdgB,EAAY,EAEhBJ,EAAK,iBAAiB,SAAUK,CAAU,EAE1CH,EAAQ,iBAAiB,QAASI,CAAgB,EAOlD,eAAeD,EAAWE,EAAO,CAIjC,GAFIA,EAAM,eAAc,EAEpBN,EAAM,MAAM,KAAM,IAAK,GACvB,OAAOO,EAAS,KAChB,CACI,QAAS,uBACT,SAAU,WACV,MAAO,KACf,CAAK,EAIDV,IACAC,EAAO,MAAM,QAAU,QACvBI,EAAQF,EAAM,MAEdb,EAAc,EACd,GAAI,CACA,MAAMqB,EAAW,MAAMvB,EAAYiB,EAAOf,CAAW,EACrDgB,EAAYK,EAAS,UACjBA,EAAS,KAAK,SAAW,GACzBP,EAAQ,MAAM,QAAU,OACpBM,EAAS,KAAK,CACV,QAAS,6EACT,SAAU,WACV,MAAO,KAC3B,CAAiB,IAEGb,EAAac,EAAS,IAAI,EAClCP,EAAQ,UAAU,OAAO,iBAAiB,EAEtCE,EAAY,GACZF,EAAQ,MAAM,QAAU,QAExBA,EAAQ,MAAM,QAAU,OAKnC,OAAQX,EAAO,CACX,QAAQ,IAAI,+BAAgCA,CAAK,CAC1D,QAAc,CACNQ,EAAO,MAAM,QAAU,MAC1B,CACDC,EAAK,MAAK,CACd,CAMA,eAAeM,GAAmB,CAE9BlB,GAAe,EACfW,EAAO,MAAM,QAAU,QACvBA,EAAO,MAAM,IAAM,OAEnB,GAAI,CACJ,MAAMU,EAAW,MAAMvB,EAAYiB,EAAOf,CAAW,EACjDO,EAAac,EAAS,IAAI,EAGtB,MAAMC,EAAY,SAAS,cAAc,eAAe,EACxD,GAAIA,EAAW,CACX,MAAMC,EAAaD,EAAU,sBAAqB,EAAG,OACrD,OAAO,SAAS,CACZ,IAAKC,EAAa,EAClB,SAAU,QAC9B,CAAiB,CACJ,CAEqBvB,EAAc,IAGfgB,GACrBF,EAAQ,MAAM,QAAU,OACxBM,EAAS,KAAK,CACV,QAAS,+DACT,SAAU,WACV,MAAO,MACvB,CAAa,GAEDN,EAAQ,MAAM,QAAU,OAE/B,OAAQX,EAAO,CACX,QAAQ,IAAI,+BAAgCA,CAAK,CAC1D,QAAc,CACNQ,EAAO,MAAM,QAAU,MAC1B,CAIL"}